{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Button.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","newFilter","handleFilterChange","value","onChange","PersonForm","addNumber","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Button","handleDelete","id","onClick","Persons","filteredPersons","map","person","key","name","number","baseUrl","axios","get","newObject","post","delete","data","put","Notification","message","errorStyle","color","fontStyle","fontSize","includes","backGround","borderStyle","borderRadius","padding","marginBottom","style","App","useState","persons","setPersons","setFilteredPersons","setNewName","setNewNumber","setNewFilter","errorMsg","setErrorMsg","useEffect","personService","then","response","event","target","filterArray","i","length","toLowerCase","push","e","preventDefault","numberObject","alreadyListed","alreadyListedId","dataChange","window","confirm","setTimeout","catch","error","concat","alert","filter","newPersonArray","newFilteredPersonArray","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4466f35f.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({newFilter, handleFilterChange}) => {\r\n    return (\r\n      <div>\r\n        filter shown with<input value ={newFilter} onChange={handleFilterChange}></input>\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({addNumber, newName, handleNameChange, newNumber, handleNumberChange}) => {\r\n    return (\r\n      <div>\r\n        <form onSubmit={addNumber}>\r\n        <div>name: <input value={newName} onChange={handleNameChange}/></div>\r\n        <div>number: <input value={newNumber} onChange={handleNumberChange}/></div>\r\n        <div><button type=\"submit\">add</button></div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Button = ({handleDelete, id}) => {\r\n    return (\r\n        <button onClick={()=> handleDelete(id)}>delete</button>\r\n    )\r\n}\r\n\r\nexport default Button","import React from 'react'\r\nimport Button from './Button'\r\n\r\nconst Persons = ({filteredPersons, handleDelete}) => {\r\n    return (\r\n      <div>{filteredPersons.map((person) =>\r\n        <p key={person.name}>{person.name} {person.number}<Button handleDelete={handleDelete} id={person.id}/></p>\r\n    )}</div>\r\n    )\r\n  }\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n  }\r\n  \r\nconst create = newObject => {\r\n    return axios.post(baseUrl, newObject)\r\n  }\r\n\r\nconst remove = (id) => {\r\n    return axios.delete(baseUrl+`/${id}`)\r\n}\r\n\r\nconst replaceNo = (id, data) => {\r\n  return axios.put(baseUrl+`/${id}`, data)\r\n}\r\n\r\n\r\nexport default { getAll, create, remove, replaceNo }","import React from 'react'\r\n\r\nconst Notification = ({message}) => {\r\n\r\n    let errorStyle = {\r\n        color: 'green',\r\n        fontStyle: 'italic',\r\n        fontSize: 16\r\n      }\r\n\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    else if (message.includes(\"Added\")) {\r\n        errorStyle = {\r\n            color: 'green',\r\n            backGround: 'lightGrey',\r\n            fontStyle: 'italic',\r\n            fontSize: 20,\r\n            borderStyle: 'solid',\r\n            borderRadius: 5,\r\n            padding: 10,\r\n            marginBottom: 10\r\n          }\r\n    }\r\n    else if (message.includes(\"Deleted\")) {\r\n        errorStyle = {\r\n            color: 'blue',\r\n            backGround: 'lightGrey',\r\n            fontStyle: 'italic',\r\n            fontSize: 20,\r\n            borderStyle: 'solid',\r\n            borderRadius: 5,\r\n            padding: 10,\r\n            marginBottom: 10\r\n            }\r\n    }\r\n    else if (message.includes(\"Changed\")) {\r\n        errorStyle = {\r\n            color: 'black',\r\n            backGround: 'lightGrey',\r\n            fontStyle: 'italic',\r\n            fontSize: 20,\r\n            borderStyle: 'solid',\r\n            borderRadius: 5,\r\n            padding: 10,\r\n            marginBottom: 10\r\n          }\r\n    }\r\n    else if (message.includes(\"Information\")) {\r\n        errorStyle = {\r\n            color: 'red',\r\n            backGround: 'lightGrey',\r\n            fontStyle: 'italic',\r\n            fontSize: 20,\r\n            borderStyle: 'solid',\r\n            borderRadius: 5,\r\n            padding: 10,\r\n            marginBottom: 10\r\n          }\r\n    }\r\n    else {\r\n        errorStyle = {\r\n            color: 'red',\r\n            backGround: 'lightGrey',\r\n            fontStyle: 'italic',\r\n            fontSize: 20,\r\n            borderStyle: 'solid',\r\n            borderRadius: 5,\r\n            padding: 10,\r\n            marginBottom: 10\r\n          }\r\n    }\r\n    return (\r\n        <div style={errorStyle}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport personService from './services/persons'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [ filteredPersons, setFilteredPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newFilter, setNewFilter] = useState('')\r\n  const [ errorMsg, setErrorMsg] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response.data)\r\n        setFilteredPersons(response.data)\r\n      })\r\n  }, [])\r\n\r\n  const addNumber = (e) => {\r\n    e.preventDefault()\r\n    const numberObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    if(!newNumber || !newName) {\r\n      alert(\"Name and number are required\")\r\n    }\r\n    else {\r\n      //Check if newName is already in persons[]\r\n      let alreadyListed = false\r\n      let i\r\n      let alreadyListedId = 1\r\n      let dataChange = {\r\n        name: null,\r\n        number: null,\r\n        id: null\r\n      }\r\n      for (i = 0; i < persons.length; i++) {\r\n          if (persons[i].name === newName) {\r\n            alreadyListed = true\r\n            alreadyListedId = persons[i].id\r\n            if (alreadyListed) {\r\n              dataChange = {\r\n                name: persons[i].name,\r\n                number: newNumber,\r\n                id: persons[i].id\r\n              }\r\n            }\r\n          }\r\n      }\r\n\r\n      //Add numberObject to persons[] if it wasn't already there\r\n      if (alreadyListed) {\r\n        const replaceBool = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\r\n        if (replaceBool) {\r\n          personService\r\n          .replaceNo(alreadyListedId, dataChange)\r\n          .then(response => {\r\n            personService\r\n            .getAll()\r\n            .then(response => {\r\n              setPersons(response.data)\r\n              setFilteredPersons(response.data)\r\n              setErrorMsg(\r\n                `Changed the phone number of ${newName}`\r\n              )\r\n              setTimeout(() => {\r\n                setErrorMsg(null)\r\n              }, 5000)\r\n            })\r\n          })\r\n          .catch(error => {\r\n            setErrorMsg(\r\n              `Information of ${newName} has already been removed from the server`\r\n            )\r\n            setTimeout(() => {\r\n              setErrorMsg(null)\r\n            }, 5000)\r\n          })\r\n        }\r\n      }\r\n      //Luodaan uusi henkilö puhelinluetteloon\r\n      else {\r\n        personService\r\n        .create(numberObject)\r\n        .then(response => {\r\n          setPersons(persons.concat(response.data))\r\n          setFilteredPersons(persons.concat(response.data))\r\n\r\n          //Notification\r\n          setErrorMsg(\r\n            `Added ${response.data.name} to the phonebook`\r\n          )\r\n          setTimeout(() => {\r\n            setErrorMsg(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          //Notification\r\n          setErrorMsg(\r\n            `${error.response.data.error}`\r\n          )\r\n          setTimeout(() => {\r\n            setErrorMsg(null)\r\n          }, 5000)\r\n        })\r\n      }\r\n    }\r\n\r\n    //Reset input values\r\n    setNewName('')\r\n    setNewNumber('')\r\n    setNewFilter('')\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n    //If filter is cleared, reset values\r\n    if(event.target.value === '') {\r\n      setFilteredPersons(persons)\r\n    }\r\n    else {\r\n      const filterArray = []\r\n      for (let i = 0; i < persons.length; i++) {\r\n        if (persons[i].name.toLowerCase().includes(event.target.value.toLowerCase())) {\r\n          filterArray.push(persons[i])\r\n        }\r\n      }\r\n      setFilteredPersons(filterArray)\r\n    }\r\n  }\r\n\r\n  const handleDelete = (id) => {\r\n\r\n    //Find the name of the person with the parameter ID\r\n    const findPerson = () => {\r\n      return persons.filter(person => id === person.id)\r\n    }\r\n    let personObject = findPerson()\r\n\r\n    //Person = The person with the parameter ID\r\n    let person = personObject[0].name\r\n    \r\n    const result = window.confirm(`Delete ${person} ?`)\r\n    if(result) {\r\n      personService\r\n      .remove(id)\r\n      .then(response => {\r\n        /*\r\n        Tehään uus lista ilman poistettua id:tä\r\n        */\r\n       const newPersonArray = persons.filter(person => person.id !== id)\r\n       const newFilteredPersonArray = filteredPersons.filter(person => person.id !== id)\r\n       setPersons(newPersonArray)\r\n       setFilteredPersons(newFilteredPersonArray)\r\n\r\n       //Notification\r\n       setErrorMsg(\r\n        `Deleted ${person} from the phonebook`\r\n        )\r\n        setTimeout(() => {\r\n          setErrorMsg(null)\r\n        }, 5000)\r\n      })\r\n      .catch(error => {\r\n        setErrorMsg(\r\n          `Information of ${person} has already been removed from the server`\r\n        )\r\n        setTimeout(() => {\r\n          setErrorMsg(null)\r\n        }, 5000)\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h3>Phonebook</h3>\r\n      <Notification message={errorMsg} />\r\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\r\n      <h3>add a new</h3>\r\n      <PersonForm addNumber={addNumber} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      <h3>Numbers:</h3>\r\n      <Persons filteredPersons={filteredPersons} handleDelete={handleDelete}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}