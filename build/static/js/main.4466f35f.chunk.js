(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),l=n.n(o),u=n(2),i=function(e){var t=e.newFilter,n=e.handleFilterChange;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:t,onChange:n}))},c=function(e){var t=e.addNumber,n=e.newName,a=e.handleNameChange,o=e.newNumber,l=e.handleNumberChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:l})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},d=function(e){var t=e.handleDelete,n=e.id;return r.a.createElement("button",{onClick:function(){return t(n)}},"delete")},m=function(e){var t=e.filteredPersons,n=e.handleDelete;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number,r.a.createElement(d,{handleDelete:n,id:e.id}))})))},f=n(3),s=n.n(f),h="/api/persons",b=function(){return s.a.get(h)},g=function(e){return s.a.post(h,e)},v=function(e){return s.a.delete(h+"/".concat(e))},p=function(e,t){return s.a.put(h+"/".concat(e),t)},E=function(e){var t=e.message,n={color:"green",fontStyle:"italic",fontSize:16};return null===t?null:(n=t.includes("Added")?{color:"green",backGround:"lightGrey",fontStyle:"italic",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:t.includes("Deleted")?{color:"blue",backGround:"lightGrey",fontStyle:"italic",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:t.includes("Changed")?{color:"black",backGround:"lightGrey",fontStyle:"italic",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:(t.includes("Information"),{color:"red",backGround:"lightGrey",fontStyle:"italic",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}),r.a.createElement("div",{style:n},t))},S=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)([]),d=Object(u.a)(l,2),f=d[0],s=d[1],h=Object(a.useState)(""),S=Object(u.a)(h,2),y=S[0],w=S[1],C=Object(a.useState)(""),j=Object(u.a)(C,2),k=j[0],O=j[1],N=Object(a.useState)(""),D=Object(u.a)(N,2),G=D[0],T=D[1],z=Object(a.useState)(null),B=Object(u.a)(z,2),F=B[0],I=B[1];Object(a.useEffect)((function(){b().then((function(e){o(e.data),s(e.data)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h3",null,"Phonebook"),r.a.createElement(E,{message:F}),r.a.createElement(i,{newFilter:G,handleFilterChange:function(e){if(T(e.target.value),""===e.target.value)s(n);else{for(var t=[],a=0;a<n.length;a++)n[a].name.toLowerCase().includes(e.target.value.toLowerCase())&&t.push(n[a]);s(t)}}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(c,{addNumber:function(e){e.preventDefault();var t={name:y,number:k};if(k&&y){var a,r=!1,l=1,u={name:null,number:null,id:null};for(a=0;a<n.length;a++)n[a].name===y&&(r=!0,l=n[a].id,r&&(u={name:n[a].name,number:k,id:n[a].id}));if(r)window.confirm("".concat(y," is already added to phonebook, replace the old number with a new one?"))&&p(l,u).then((function(e){b().then((function(e){o(e.data),s(e.data),I("Changed the phone number of ".concat(y)),setTimeout((function(){I(null)}),5e3)}))})).catch((function(e){I("Information of ".concat(y," has already been removed from the server")),setTimeout((function(){I(null)}),5e3)}));else g(t).then((function(e){o(n.concat(e.data)),s(n.concat(e.data)),I("Added ".concat(e.data.name," to the phonebook")),setTimeout((function(){I(null)}),5e3)})).catch((function(e){I("".concat(e.response.data.error)),setTimeout((function(){I(null)}),5e3)}))}else alert("Name and number are required");w(""),O(""),T("")},newName:y,handleNameChange:function(e){w(e.target.value)},newNumber:k,handleNumberChange:function(e){O(e.target.value)}}),r.a.createElement("h3",null,"Numbers:"),r.a.createElement(m,{filteredPersons:f,handleDelete:function(e){var t=n.filter((function(t){return e===t.id}))[0].name;window.confirm("Delete ".concat(t," ?"))&&v(e).then((function(a){var r=n.filter((function(t){return t.id!==e})),l=f.filter((function(t){return t.id!==e}));o(r),s(l),I("Deleted ".concat(t," from the phonebook")),setTimeout((function(){I(null)}),5e3)})).catch((function(e){I("Information of ".concat(t," has already been removed from the server")),setTimeout((function(){I(null)}),5e3)}))}}))};l.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.4466f35f.chunk.js.map